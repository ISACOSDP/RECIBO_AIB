<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Recibo de Pago - AIB</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 1em; color: #000; background: #fff; }
        .header-container { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
        .logo { max-width: 120px; }
        .header-text { text-align: center; font-size: 20px; font-weight: bold; flex-grow: 1; }
        .recibo-numero { font-size: 22px; font-weight: bold; text-align: center; }
        .section-info { margin-bottom: 1em; font-size: 16px; }
        .field { margin: 5px 0; }
        .label { font-weight: bold; }
        table { width: 100%; max-width: 180mm; border-collapse: collapse; margin-top: 1em; font-size: 14px; }
        th, td { border: 1px solid #000; padding: 6px; text-align: center; }
        th { background: #f0f0f0; }
        .totales { font-size: 16px; font-weight: bold; text-align: right; margin-top: 1em; max-width: 180mm; margin-left: auto; margin-right: auto; }
        .nota { margin-top: 1em; font-size: 14px; max-width: 180mm; margin-left: auto; margin-right: auto; }
        button { font-size: 16px; padding: 10px 20px; cursor: pointer; margin-top: 20px; }
        @media print { button { display: none; } }
    </style>
</head>
<body>
    <div class="header-container">
        <img class="logo" src="https://raw.githubusercontent.com/ISACOSDP/RECIBO_AIB/main/docs/LOGO%20AIB.png" alt="LOGO AIB">
        <div class="header-text">
            AIB<br>QUITO<br>E4D Y LA COCHA<br>0979225720 / 0979274832
            <div class="recibo-numero">RECIBO N°: <span id="factura"></span></div>
        </div>
    </div>

    <div class="section-info">
        <div class="field"><span class="label">FECHA:</span> <span id="fecha"></span></div>
        <div class="field"><span class="label">CLIENTE:</span> <span id="cliente"></span></div>
        <div class="field"><span class="label">RUC / CÉDULA:</span> <span id="ruc"></span></div>
    </div>

    <table>
        <thead>
            <tr>
                <th>PRODUCTO</th>
                <th>PRECIO UNITARIO</th>
                <th>CANTIDAD</th>
                <th>TOTAL</th>
            </tr>
        </thead>
        <tbody id="detalle"></tbody>
    </table>

    <div class="totales">
        <p>SUBTOTAL: $<span id="subtotal"></span></p>
        <p>IVA (15%): $<span id="iva"></span></p>
        <p>TOTAL: $<span id="total"></span></p>
        <p>ABONADO: $<span id="abonado"></span></p>
        <p>SALDO: $<span id="saldo"></span></p>
    </div>

    <div style="text-align: center;">
        <button onclick="window.print()">IMPRIMIR RECIBO</button>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        document.getElementById("factura").innerText = urlParams.get("factura") || "N/A";
        document.getElementById("cliente").innerText = urlParams.get("cliente") || "N/A";
        document.getElementById("ruc").innerText = urlParams.get("ruc") || "N/A";
        document.getElementById("fecha").innerText = urlParams.get("fecha") || "N/A";
        document.getElementById("subtotal").innerText = urlParams.get("subtotal") || "0.00";
        document.getElementById("iva").innerText = urlParams.get("iva") || "0.00";
        document.getElementById("total").innerText = urlParams.get("total") || "0.00";
        document.getElementById("abonado").innerText = urlParams.get("abonado") || "0.00";
        document.getElementById("saldo").innerText = urlParams.get("saldo") || "0.00";

        function populateTable(productos, precios, cantidades, totales) {
            let tableBody = document.getElementById("detalle");
            let p = productos ? productos.split(",") : [];
            let pr = precios ? precios.split(",") : [];
            let c = cantidades ? cantidades.split(",") : [];
            let t = totales ? totales.split(",") : [];

            for (let i = 0; i < p.length; i++) {
                let row = document.createElement("tr");
                row.innerHTML = `
                    <td>${p[i] || '-'}</td>
                    <td>$${parseFloat(pr[i] || 0).toFixed(2)}</td>
                    <td>${c[i] || 0}</td>
                    <td>$${parseFloat(t[i] || 0).toFixed(2)}</td>
                `;
                tableBody.appendChild(row);
            }
        }

        populateTable(
            urlParams.get("productos"),
            urlParams.get("precios"),
            urlParams.get("cantidades"),
            urlParams.get("totales")
        );
    </script>
</body>
</html>
